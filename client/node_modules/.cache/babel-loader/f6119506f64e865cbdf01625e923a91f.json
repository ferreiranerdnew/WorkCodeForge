{"ast":null,"code":"var _jsxFileName = \"E:\\\\000gitRepositorios\\\\WorkCodeForge\\\\client\\\\src\\\\components\\\\chat\\\\chat.js\",\n    _s = $RefreshSig$();\n\n// src/components/Chat.jsx\nimport { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport useWindowDimensions from '../../hooks/useWindowDimensions';\nimport { ANNOUNCEMENT, SEND_DIRECT, CLEAR_INCOMING, TOGGLE_GIF_SEARCH_OPEN, JOIN_VIDEO } from '../../reducers/mapReducer';\nimport './chat.css';\nimport { FaClipboardList } from 'react-icons/fa';\nimport VideoContainer from '../video';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Chat({\n  canOpen\n}) {\n  _s();\n\n  const [showGif, setShowGif] = useState(false);\n  const [receiver, setReceiver] = useState('Everyone');\n  const [showInstruction, setShowInstruction] = useState(false);\n  const [videoOn, setVideoOn] = useState(false);\n  const dispatch = useDispatch();\n  const {\n    width,\n    height,\n    topMargin,\n    leftMargin\n  } = useWindowDimensions();\n  const userId = useSelector(state => state.user.id);\n  const playersArr = useSelector(state => state.players);\n  const incomingGifState = useSelector(state => state.incomingGif);\n  const onlineUsers = useSelector(state => state.players);\n  const gifSearchOpen = useSelector(state => state.gifSearchOpen);\n  useEffect(() => {\n    if (!incomingGifState.gifObj || !canOpen) return;\n    setShowGif(true);\n    const timer = setTimeout(() => {\n      setShowGif(false);\n      dispatch(CLEAR_INCOMING());\n    }, 5200);\n    return () => clearTimeout(timer);\n  }, [incomingGifState, canOpen, dispatch]);\n\n  const toggleGifSearch = () => {\n    dispatch(TOGGLE_GIF_SEARCH_OPEN());\n  };\n\n  const toggleInstruction = () => {\n    setShowInstruction(!showInstruction);\n  };\n\n  const startVideoCall = () => {\n    dispatch(JOIN_VIDEO());\n    setVideoOn(true);\n  };\n\n  const userArr = Object.values(onlineUsers).map(user => user.name);\n  const userSelectList = userArr.map((name, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n    value: name,\n    children: name\n  }, index, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [canOpen && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"nes-btn is-primary\",\n      onClick: toggleInstruction,\n      style: {\n        zIndex: 21,\n        position: 'absolute',\n        left: width - leftMargin - 255,\n        top: topMargin + 38,\n        width: 186,\n        height: 39,\n        paddingLeft: 3\n      },\n      children: \"Instruction\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this), canOpen && showInstruction && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"nes-container is-rounded is-dark\",\n      style: {\n        position: 'absolute',\n        left: (width - 375) / 2,\n        top: (height - 200) / 2,\n        width: 375,\n        height: 200,\n        margin: '0 15px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            color: 'white',\n            margin: 0\n          },\n          children: \"Instruction\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"icon-list\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"nes-icon close is-small nes-pointer\",\n            onClick: toggleInstruction,\n            style: {\n              backgroundColor: 'white'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Move: \\u2B06 \\u27A1 \\u2B07 \\u2B05\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Action: Space\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Close window: Space\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), canOpen && playersArr[userId] && playersArr[userId].socketId && playersArr[userId].skin && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"nes-btn is-primary\",\n      onClick: toggleGifSearch,\n      style: {\n        zIndex: 20,\n        position: 'absolute',\n        left: width - leftMargin - 255,\n        top: topMargin + 134,\n        width: 186,\n        height: 39,\n        paddingLeft: 3\n      },\n      children: \"Send a GIF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }, this), canOpen && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"nes-btn is-success\",\n      onClick: startVideoCall,\n      style: {\n        zIndex: 20,\n        position: 'absolute',\n        left: width - leftMargin - 255,\n        top: topMargin + 190,\n        width: 186,\n        height: 39,\n        paddingLeft: 3\n      },\n      children: \"Start Video Call\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this), canOpen && /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        position: 'absolute',\n        left: leftMargin,\n        top: topMargin - 10,\n        margin: 0,\n        color: 'white',\n        zIndex: -200\n      },\n      children: \"Beauty Services\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }, this), gifSearchOpen && canOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"nes-container is-rounded is-dark\",\n      style: {\n        zIndex: 20,\n        position: 'absolute',\n        left: width / 2 + 200,\n        top: height / 2 - 150,\n        width: 335,\n        margin: '0 15px'\n      },\n      onKeyPressCapture: e => {\n        if (e.code === 'Space') e.stopPropagation();\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            color: 'white',\n            margin: 0\n          },\n          children: \"Send a GIF!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"icon-list\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"nes-icon close is-small nes-pointer\",\n            onClick: toggleGifSearch,\n            style: {\n              backgroundColor: 'white'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"user-select\",\n        style: {\n          color: 'white',\n          marginTop: 8\n        },\n        children: \"To:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"user-select\",\n        style: {\n          width: '100%'\n        },\n        value: receiver,\n        onChange: e => setReceiver(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Everyone\",\n          children: \"Everyone\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this), userSelectList]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }, this), showGif && canOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        position: 'absolute',\n        left: width / 2 + 260,\n        top: height / 2 - 70\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"nes-balloon from-right\",\n        style: {\n          width: 235,\n          marginBottom: 0,\n          padding: 10,\n          justifyContent: 'center'\n        },\n        children: [\"A GIF from: \", incomingGifState.senderName, \" to\", ' ', incomingGifState.receiverName || 'everyone']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n        title: \"GIF\",\n        src: incomingGifState.gifObj.embed_url,\n        width: 235,\n        height: 235,\n        frameBorder: \"0\",\n        className: \"giphy-embed\",\n        style: {\n          justifyContent: 'center'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }, this), videoOn && canOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video-wrapper\",\n      style: {\n        position: 'fixed',\n        bottom: 0,\n        width: '100%',\n        zIndex: 10\n      },\n      children: /*#__PURE__*/_jsxDEV(VideoContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Chat, \"OgLh3Oea2BUUdrFg86IzdRsV9Pc=\", false, function () {\n  return [useDispatch, useWindowDimensions, useSelector, useSelector, useSelector, useSelector, useSelector];\n});\n\n_c = Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["E:/000gitRepositorios/WorkCodeForge/client/src/components/chat/chat.js"],"names":["useState","useEffect","useDispatch","useSelector","useWindowDimensions","ANNOUNCEMENT","SEND_DIRECT","CLEAR_INCOMING","TOGGLE_GIF_SEARCH_OPEN","JOIN_VIDEO","FaClipboardList","VideoContainer","Chat","canOpen","showGif","setShowGif","receiver","setReceiver","showInstruction","setShowInstruction","videoOn","setVideoOn","dispatch","width","height","topMargin","leftMargin","userId","state","user","id","playersArr","players","incomingGifState","incomingGif","onlineUsers","gifSearchOpen","gifObj","timer","setTimeout","clearTimeout","toggleGifSearch","toggleInstruction","startVideoCall","userArr","Object","values","map","name","userSelectList","index","zIndex","position","left","top","paddingLeft","margin","display","justifyContent","color","backgroundColor","socketId","skin","e","code","stopPropagation","marginTop","target","value","flexDirection","marginBottom","padding","senderName","receiverName","embed_url","bottom"],"mappings":"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","sourcesContent":["// src/components/Chat.jsx\r\nimport { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport useWindowDimensions from '../../hooks/useWindowDimensions';\r\nimport {\r\n  ANNOUNCEMENT,\r\n  SEND_DIRECT,\r\n  CLEAR_INCOMING,\r\n  TOGGLE_GIF_SEARCH_OPEN,\r\n  JOIN_VIDEO,\r\n} from '../../reducers/mapReducer';\r\nimport './chat.css';\r\nimport { FaClipboardList } from 'react-icons/fa';\r\nimport VideoContainer from '../video';\r\n\r\nexport default function Chat({ canOpen }) {\r\n  const [showGif, setShowGif] = useState(false);\r\n  const [receiver, setReceiver] = useState('Everyone');\r\n  const [showInstruction, setShowInstruction] = useState(false);\r\n  const [videoOn, setVideoOn] = useState(false);\r\n  const dispatch = useDispatch();\r\n  const { width, height, topMargin, leftMargin } = useWindowDimensions();\r\n\r\n  const userId = useSelector((state) => state.user.id);\r\n  const playersArr = useSelector((state) => state.players);\r\n  const incomingGifState = useSelector((state) => state.incomingGif);\r\n  const onlineUsers = useSelector((state) => state.players);\r\n  const gifSearchOpen = useSelector((state) => state.gifSearchOpen);\r\n\r\n  useEffect(() => {\r\n    if (!incomingGifState.gifObj || !canOpen) return;\r\n    setShowGif(true);\r\n    const timer = setTimeout(() => {\r\n      setShowGif(false);\r\n      dispatch(CLEAR_INCOMING());\r\n    }, 5200);\r\n    return () => clearTimeout(timer);\r\n  }, [incomingGifState, canOpen, dispatch]);\r\n\r\n  const toggleGifSearch = () => {\r\n    dispatch(TOGGLE_GIF_SEARCH_OPEN());\r\n  };\r\n\r\n  const toggleInstruction = () => {\r\n    setShowInstruction(!showInstruction);\r\n  };\r\n\r\n  const startVideoCall = () => {\r\n    dispatch(JOIN_VIDEO());\r\n    setVideoOn(true);\r\n  };\r\n\r\n  const userArr = Object.values(onlineUsers).map((user) => user.name);\r\n  const userSelectList = userArr.map((name, index) => (\r\n    <option key={index} value={name}>\r\n      {name}\r\n    </option>\r\n  ));\r\n\r\n  return (\r\n    <>\r\n      {canOpen && (\r\n        <button\r\n          className=\"nes-btn is-primary\"\r\n          onClick={toggleInstruction}\r\n          style={{\r\n            zIndex: 21,\r\n            position: 'absolute',\r\n            left: width - leftMargin - 255,\r\n            top: topMargin + 38,\r\n            width: 186,\r\n            height: 39,\r\n            paddingLeft: 3,\r\n          }}\r\n        >\r\n          Instruction\r\n        </button>\r\n      )}\r\n\r\n      {canOpen && showInstruction && (\r\n        <div\r\n          className=\"nes-container is-rounded is-dark\"\r\n          style={{\r\n            position: 'absolute',\r\n            left: (width - 375) / 2,\r\n            top: (height - 200) / 2,\r\n            width: 375,\r\n            height: 200,\r\n            margin: '0 15px',\r\n          }}\r\n        >\r\n          <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n            <h2 style={{ color: 'white', margin: 0 }}>Instruction</h2>\r\n            <section className=\"icon-list\">\r\n              <i\r\n                className=\"nes-icon close is-small nes-pointer\"\r\n                onClick={toggleInstruction}\r\n                style={{ backgroundColor: 'white' }}\r\n              />\r\n            </section>\r\n          </div>\r\n          <p>Move: ⬆ ➡ ⬇ ⬅</p>\r\n          <p>Action: Space</p>\r\n          <p>Close window: Space</p>\r\n        </div>\r\n      )}\r\n\r\n      {canOpen &&\r\n        playersArr[userId] &&\r\n        playersArr[userId].socketId &&\r\n        playersArr[userId].skin && (\r\n          <button\r\n            className=\"nes-btn is-primary\"\r\n            onClick={toggleGifSearch}\r\n            style={{\r\n              zIndex: 20,\r\n              position: 'absolute',\r\n              left: width - leftMargin - 255,\r\n              top: topMargin + 134,\r\n              width: 186,\r\n              height: 39,\r\n              paddingLeft: 3,\r\n            }}\r\n          >\r\n            Send a GIF\r\n          </button>\r\n        )}\r\n\r\n      {canOpen && (\r\n        <button\r\n          className=\"nes-btn is-success\"\r\n          onClick={startVideoCall}\r\n          style={{\r\n            zIndex: 20,\r\n            position: 'absolute',\r\n            left: width - leftMargin - 255,\r\n            top: topMargin + 190,\r\n            width: 186,\r\n            height: 39,\r\n            paddingLeft: 3,\r\n          }}\r\n        >\r\n          Start Video Call\r\n        </button>\r\n      )}\r\n\r\n      {canOpen && (\r\n        <h1\r\n          style={{\r\n            position: 'absolute',\r\n            left: leftMargin,\r\n            top: topMargin - 10,\r\n            margin: 0,\r\n            color: 'white',\r\n            zIndex: -200,\r\n          }}\r\n        >\r\n          Beauty Services{/* RFERREIRA MUDAR PARTE SUPERIOR DO */}\r\n        </h1>\r\n      )}\r\n\r\n      {gifSearchOpen && canOpen && (\r\n        <div\r\n          className=\"nes-container is-rounded is-dark\"\r\n          style={{\r\n            zIndex: 20,\r\n            position: 'absolute',\r\n            left: width / 2 + 200,\r\n            top: height / 2 - 150,\r\n            width: 335,\r\n            margin: '0 15px',\r\n          }}\r\n          onKeyPressCapture={(e) => {\r\n            if (e.code === 'Space') e.stopPropagation();\r\n          }}\r\n        >\r\n          <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n            <h3 style={{ color: 'white', margin: 0 }}>Send a GIF!</h3>\r\n            <section className=\"icon-list\">\r\n              <i\r\n                className=\"nes-icon close is-small nes-pointer\"\r\n                onClick={toggleGifSearch}\r\n                style={{ backgroundColor: 'white' }}\r\n              />\r\n            </section>\r\n          </div>\r\n\r\n          <label htmlFor=\"user-select\" style={{ color: 'white', marginTop: 8 }}>\r\n            To:\r\n          </label>\r\n          <select\r\n            id=\"user-select\"\r\n            style={{ width: '100%' }}\r\n            value={receiver}\r\n            onChange={(e) => setReceiver(e.target.value)}\r\n          >\r\n            <option value=\"Everyone\">Everyone</option>\r\n            {userSelectList}\r\n          </select>\r\n\r\n          {/* GIF search box implementation can be added here */}\r\n        </div>\r\n      )}\r\n\r\n      {showGif && canOpen && (\r\n        <div\r\n          style={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            position: 'absolute',\r\n            left: width / 2 + 260,\r\n            top: height / 2 - 70,\r\n          }}\r\n        >\r\n          <p\r\n            className=\"nes-balloon from-right\"\r\n            style={{\r\n              width: 235,\r\n              marginBottom: 0,\r\n              padding: 10,\r\n              justifyContent: 'center',\r\n            }}\r\n          >\r\n            A GIF from: {incomingGifState.senderName} to{' '}\r\n            {incomingGifState.receiverName || 'everyone'}\r\n          </p>\r\n\r\n          <iframe\r\n            title=\"GIF\"\r\n            src={incomingGifState.gifObj.embed_url}\r\n            width={235}\r\n            height={235}\r\n            frameBorder=\"0\"\r\n            className=\"giphy-embed\"\r\n            style={{ justifyContent: 'center' }}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {videoOn && canOpen && (\r\n        <div\r\n          className=\"video-wrapper\"\r\n          style={{ position: 'fixed', bottom: 0, width: '100%', zIndex: 10 }}\r\n        >\r\n          <VideoContainer />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}